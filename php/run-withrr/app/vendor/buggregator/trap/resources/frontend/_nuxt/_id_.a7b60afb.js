import{_ as C}from"./layout-sidebar.vue.66485d1b.js";import{d as R,c as v,o,a as l,b as u,t as c,e as r,f as h,w as p,F as k,r as q,g,u as _,h as i,p as O,i as j,_ as w,j as A,k as F,l as S}from"./entry.769d5560.js";import{u as N}from"./fetch.ca63033f.js";import{P as T}from"./page-header.68d25fa4.js";import{u as V}from"./use-http-dump.c688feed.js";import{u as L}from"./use-events.a9188a22.js";import{T as H,a as P}from"./table-base.7c3f5cae.js";import{F as Q}from"./file-attachment.a46b62ae.js";import"./use-formats.c79ce0bd.js";const $=a=>(O("data-v-63ed9648"),a=a(),j(),a),U={ref:"main",class:"http-dump-page"},z={class:"http-dump-page__main"},G={class:"http-dump-page__title"},J={class:"http-dump-page__title-method"},K={class:"http-dump-page__title-uri"},M={key:0,class:"http-dump-page__section"},W=$(()=>u("h1",null,"Headers",-1)),X={key:1,class:"http-dump-page__section"},Y=$(()=>u("h1",null,"Cookie",-1)),Z={key:2,class:"http-dump-page__section"},x=$(()=>u("h1",null,"Query Parameters",-1)),ee={key:3,class:"http-dump-page__section"},te=$(()=>u("h1",null,"POST Data",-1)),se={key:4,class:"http-dump-page__section"},ne={class:"http-dump-page__attachments"},oe={key:5,class:"http-dump-page__section"},ae=$(()=>u("h1",null,"Request Body",-1)),ue={class:"http-dump-page__section-body"},de=R({__name:"http-dump-page",props:{event:{}},setup(a){const d=a,y=v(()=>{var e,n;return decodeURI((n=(e=d.event.payload)==null?void 0:e.request)==null?void 0:n.uri)}),f=v(()=>{var e,n,t,s;return((n=(e=d.event.payload)==null?void 0:e.request)==null?void 0:n.post)&&Object.keys((s=(t=d.event.payload)==null?void 0:t.request)==null?void 0:s.post).length>0}),b=v(()=>{var e,n,t,s;return((n=(e=d.event.payload)==null?void 0:e.request)==null?void 0:n.query)&&Object.keys((s=(t=d.event.payload)==null?void 0:t.request)==null?void 0:s.query).length>0}),D=v(()=>{var e,n;return Object.keys(((n=(e=d.event.payload)==null?void 0:e.request)==null?void 0:n.headers)||{}).length>0}),m=v(()=>{var e,n,t,s;return((n=(e=d.event.payload)==null?void 0:e.request)==null?void 0:n.cookies)&&Object.keys((s=(t=d.event.payload)==null?void 0:t.request)==null?void 0:s.cookies).length>0}),B=v(()=>{var e,n,t;return((t=(n=(e=d.event.payload)==null?void 0:e.request)==null?void 0:n.body)==null?void 0:t.length)>0}),E=v(()=>{var e,n,t,s;return((n=(e=d.event.payload)==null?void 0:e.request)==null?void 0:n.files)&&Object.keys((s=(t=d.event.payload)==null?void 0:t.request)==null?void 0:s.files).length>0});return(e,n)=>(o(),l("div",U,[u("main",z,[u("h2",G,[u("span",J,c(e.event.payload.request.method),1),r(": "),u("span",K,"/"+c(y.value),1)]),D.value?(o(),l("section",M,[W,h(_(P),null,{default:p(()=>[(o(!0),l(k,null,q(e.event.payload.request.headers,(t,s)=>(o(),g(_(H),{key:s,title:String(s)},{default:p(()=>[r(c(t[0]||t),1)]),_:2},1032,["title"]))),128))]),_:1})])):i("",!0),m.value?(o(),l("section",X,[Y,h(_(P),null,{default:p(()=>[(o(!0),l(k,null,q(e.event.payload.request.cookies,(t,s)=>(o(),g(_(H),{key:s,title:String(s)},{default:p(()=>[r(c(t),1)]),_:2},1032,["title"]))),128))]),_:1})])):i("",!0),b.value?(o(),l("section",Z,[x,h(_(P),null,{default:p(()=>[(o(!0),l(k,null,q(e.event.payload.request.query,(t,s)=>(o(),g(_(H),{key:s,title:String(s)},{default:p(()=>[r(c(t),1)]),_:2},1032,["title"]))),128))]),_:1})])):i("",!0),f.value?(o(),l("section",ee,[te,h(_(P),null,{default:p(()=>[(o(!0),l(k,null,q(e.event.payload.request.post,(t,s)=>(o(),g(_(H),{key:s,title:String(s)},{default:p(()=>[r(c(t),1)]),_:2},1032,["title"]))),128))]),_:1})])):i("",!0),E.value?(o(),l("section",se,[u("h1",null,"Attachments ("+c(e.event.payload.request.files.length)+")",1),u("div",ne,[(o(!0),l(k,null,q(e.event.payload.request.files,t=>(o(),g(_(Q),{key:t.id,"event-id":e.event.id,attachment:t},null,8,["event-id","attachment"]))),128))])])):i("",!0),B.value?(o(),l("section",oe,[ae,u("code",ue,c(e.event.payload.request.body),1)])):i("",!0)])],512))}});const le=w(de,[["__scopeId","data-v-63ed9648"]]),{normalizeHttpDumpEvent:pe}=V(),re=R({components:{HttpDumpPage:le,PageHeader:T},async setup(){const a=A(),d=F(),y=a.params.id,{events:f}=L(),{data:b,pending:D}=await N(f.getUrl(y),{onResponse({response:m}){return m.data},onResponseError(){d.push("/404")},onRequestError(){d.push("/404")}},"$49gnpqdOen");return{serverEvent:b,pending:D,eventId:y,clearEvent:()=>f.removeById(y)}},head(){return{title:`Http dumps > ${this.eventId} | Buggregator`}},computed:{event(){return this.serverEvent?pe(this.serverEvent):null}},methods:{onDelete(){this.clearEvent(),this.$router.push("/")}}});const I=a=>(O("data-v-4c6837ad"),a=a(),j(),a),_e={class:"http-dumps-event"},ce={key:0,class:"http-dumps-event__loading"},ie=I(()=>u("div",null,null,-1)),he=I(()=>u("div",null,null,-1)),me=I(()=>u("div",null,null,-1)),ve=[ie,he,me],ye={class:"http-dumps-event__body"};function ge(a,d,y,f,b,D){const m=C,B=S("PageHeader"),E=S("HttpDumpPage");return o(),l("main",_e,[h(B,{class:"http-dumps-event__head","button-title":"Delete event",onDelete:a.onDelete},{default:p(()=>[h(m,{to:"/"},{default:p(()=>[r("Home")]),_:1}),r(" / "),h(m,{to:"/http-dumps"},{default:p(()=>[r("Http dumps")]),_:1}),r(" / "),h(m,{disabled:!0},{default:p(()=>[r(c(a.event.id),1)]),_:1})]),_:1},8,["onDelete"]),a.pending&&!a.event?(o(),l("div",ce,ve)):i("",!0),u("div",ye,[a.event?(o(),g(E,{key:0,event:a.event},null,8,["event"])):i("",!0)])])}const Ee=w(re,[["render",ge],["__scopeId","data-v-4c6837ad"]]);export{Ee as default};
